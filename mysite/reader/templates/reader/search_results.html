<!DOCTYPE html>
{% extends "base.html" %}
{% load static %}
<html lang="ko">
<head>
    <title>{% block title %}ğŸ” ê²€ìƒ‰ ê²°ê³¼</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="{% static 'css/search_results.css' %}">
    <style>
        .gallery {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
            padding: 10px; /* ê° ìš”ì†Œ ì‚¬ì´ì— ì—¬ë°±ì„ ì£¼ê¸° ìœ„í•´ ì¶”ê°€ */
            list-style: none; /* ë¦¬ìŠ¤íŠ¸ ìŠ¤íƒ€ì¼ ì œê±° */
        }
        
        .container1 {
            width: 260px;
            height: 320px;
            position: relative;
            overflow: hidden; /* ìš”ì†Œ ë‚´ë¶€ì˜ ì½˜í…ì¸ ê°€ ë„˜ì¹˜ëŠ” ê²½ìš°ë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•´ ì¶”ê°€ */
        }
        .overlay {
            position: absolute;
            width: 100%;
            height: 100%;
            background: linear-gradient(105deg,
                transparent 40%,
                rgba(255, 219, 112, 0.8) 45%,
                rgba(132, 50, 255 ,0.6) 50%,
                transparent 54%);
            filter: brightness(1.1) opacity(0.8);
            mix-blend-mode: color-dodge;
            background-size: 150% 150%;
            background-position: 100%;
            transition: all 0.3s;
        }
        .card {
            width: 100%;
            height: 100%;
            background-size: cover;
            position: relative;
        }
        
        .book-title {
            position: absolute;
            bottom: 10px;
            left: 10px;
            right: 10px;
            background-color: rgba(255, 255, 255, 0.8);
            padding: 5px;
            text-align: center;
            font-size: 16px;
            font-weight: bold;
            pointer-events: none; /* ë§í¬ë¥¼ í´ë¦­í•  ìˆ˜ ì—†ë„ë¡ ì„¤ì • */
        }
    </style>

</head>{% endblock %}
{% block content %}
<body>
    <div class="search-results-container">
        <h1 class='h'>ğŸ” ê²€ìƒ‰ ê²°ê³¼</h1>
        <div class="books">
            <ul class="gallery">
                {% for story in stories %}
                <li class='book container1'>
                    <div class="overlay"></div>
                    <a href="{% url 'reader:story_detail' story.id %}?keyword={{ keyword }}">
                        {% if story.image %}
                            <img class="card" src="{{ story.image.url }}" alt="{{ story.title }}">
                        {% else %}
                            <img class="card" src="{% static 'images/ìƒì.png' %}" alt="{{ story.title }}">  <!-- ê¸°ë³¸ ì´ë¯¸ì§€ ê²½ë¡œ ì„¤ì • -->
                        {% endif %}
                        <span class="book-title">{{ story.title }}</span>
                    </a>
                </li>
            {% endfor %}
            </ul>
            
        </div>
    </div>
    <script>// ëª¨ë“  .container1 ìš”ì†Œë¥¼ ì„ íƒí•©ë‹ˆë‹¤.
        var containers = document.querySelectorAll('.container1');
        
        // ê° .container1 ìš”ì†Œì— ëŒ€í•´ ë°˜ë³µí•©ë‹ˆë‹¤.
        containers.forEach(function(container) {
            var overlay = container.querySelector('.overlay');
            var timeout;
        
            // ë§ˆìš°ìŠ¤ê°€ ìš”ì†Œ ìœ„ì—ì„œ ì›€ì§ì¼ ë•Œ ë°œìƒí•˜ëŠ” ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤.
            container.addEventListener('mousemove', function(e) {
                var x = e.offsetX;
                var y = e.offsetY;
                var rotateY = -1 / 5 * x + 20;
                var rotateX = 4 / 30 * y - 20;
        
                overlay.style.backgroundPosition = `${x / 5 + y / 5}%`;
                overlay.style.filter = `opacity(${x / 200}) brightness(1.2)`;
        
                container.style.transition = 'transform 0.1s ease'; // transform ì†ì„±ì— transitionì„ ì¶”ê°€í•©ë‹ˆë‹¤.
                container.style.transform = `perspective(350px) rotateX(${rotateX}deg) rotateY(${rotateY}deg)`;
        
                // ì´ì „ì— ì„¤ì •ëœ timeoutì„ ì´ˆê¸°í™”í•©ë‹ˆë‹¤.
                clearTimeout(timeout);
            });
        
            // ë§ˆìš°ìŠ¤ê°€ ìš”ì†Œë¥¼ ë²—ì–´ë‚  ë•Œ ë°œìƒí•˜ëŠ” ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤.
            container.addEventListener('mouseout', function() {
                overlay.style.filter = 'opacity(0)';
                // 0.2ì´ˆ í›„ì— transform ì†ì„±ì„ ì›ë˜ ìƒíƒœë¡œ ë˜ëŒë¦¬ë„ë¡ setTimeoutì„ ì‚¬ìš©í•©ë‹ˆë‹¤.
                timeout = setTimeout(function() {
                    container.style.transition = 'transform 0.1s ease'; // transform ì†ì„±ì— transitionì„ ì¶”ê°€í•©ë‹ˆë‹¤.
                    container.style.transform = 'perspective(350px) rotateY(0deg) rotateX(0deg)';
                }, 150); // 0.2ì´ˆ(200ë°€ë¦¬ì´ˆ) í›„ì— ì‹¤í–‰ë©ë‹ˆë‹¤.
            });
        });
      </script>
</body>
</html>
{% endblock %}
