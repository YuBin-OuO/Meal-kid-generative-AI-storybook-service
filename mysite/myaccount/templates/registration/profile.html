{% comment %} <!DOCTYPE html>
{% load static %}
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>내 정보</title>
    <link rel="stylesheet" href="{% static 'style.css' %}">
</head>
<body>
    <div class="profile">
        <h2>내 정보</h2>
        <p>안녕하세요, {{ user.username }}님!</p>
        <p>이메일: {{ user.email }}</p>
    </div>
</body>
</html> {% endcomment %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>계정관리</title>
    {% load static %}
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
</head>
<body>
    <div id="content" class="main-container">
        <section class="content-area">
            <div id="main" role="main">
                <h2>내 계정</h2>
                <h3 id="form-title">계정 추가</h3>
                <form id="profile-form" method="post" enctype="multipart/form-data">
                    {% csrf_token %}
                    {{ form.as_p }}
                    <button type="submit" id="save-button">저장하기</button>
                </form>

                <h3>내 계정 목록</h3>
                <ul>
                    {% for profile in profiles %}
                    <li>
                        <img src="{{ profile.avatar.url }}" alt="Profile Image" width="50" height="50">
                        {{ profile.name }}
                        <button type="button" onclick="editProfile({{ profile.id }}, '{{ profile.name }}')">수정하기</button>
                        <form method="post" action="{% url 'profile_delete' profile.id %}" style="display:inline;">
                            {% csrf_token %}
                            <button type="submit">삭제하기</button>
                        </form>
                    </li>
                    {% endfor %}
                </ul>

                <a href="{% url 'select_account' %}">돌아가기</a>
            </div>
        </section>
    </div>

    <script>
        function editProfile(profileId, profileName) {
            document.getElementById('id_name').value = profileName;
            document.getElementById('profile-form').action = `/myaccount/profile/`;
            document.getElementById('form-title').textContent = "Edit Profile";
            document.getElementById('save-button').textContent = "Update";
        }
        window.onload = function() {
            document.getElementById('profile-form').reset();
            document.getElementById('form-title').textContent = "Add Profile";
            document.getElementById('save-button').textContent = "저장하기";
            document.getElementById('profile-form').action = "/myaccount/profile/";
        };
    </script>
</body>
</html>
